{"version":3,"sources":["components/UI/Button/Button.js","components/UI/Button/Button.module.css","components/UI/Spinner/Spinner.js","components/UI/Spinner/Spinner.module.css","containers/Auth/Signup.js","components/UI/Input/Input.js","components/UI/Input/Input.module.css"],"names":["button","props","disabled","className","classes","Button","btnType","join","onClick","clicked","children","module","exports","spinner","Loader","signup","React","memo","useState","username","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","email","isEmail","password","minLength","controls","setControls","buildingProduct","authRedirectPath","onSetSignupRedirectPath","useEffect","submitHandler","event","a","preventDefault","onAuth","response","expirationDate","Date","getTime","localStorage","setItem","_id","console","log","formElementsArray","key","push","id","config","form","map","formElement","invalid","shouldValidate","changed","controlName","updatedControls","updateObject","target","checkValidity","window","alert","inputChangedHandler","loading","errorMessage","error","message","authRedirect","isAuthenticated","to","style","marginTop","paddingTop","paddingLeft","action","onSubmit","connect","state","token","productBuilder","building","signupRedirectPath","dispatch","actions","input","inputElement","inputClasses","InputElement","Invalid","onChange","options","option","displayValue","Input","Label","label"],"mappings":"kGAAA,sCAWeA,IAPA,SAACC,GAAD,OACX,4BACIC,SAAUD,EAAMC,SAChBC,UAAW,CAACC,IAAQC,OAAQD,IAAQH,EAAMK,UAAUC,KAAK,KACzDC,QAASP,EAAMQ,SAAUR,EAAMS,Y,oBCPvCC,EAAOC,QAAU,CAAC,OAAS,uBAAuB,QAAU,wBAAwB,OAAS,yB,iCCD7F,sCAQeC,IAJC,kBACZ,yBAAKV,UAAWC,IAAQU,QAAxB,gB,oBCJJH,EAAOC,QAAU,CAAC,OAAS,wBAAwB,MAAQ,yB,qKCUrDG,EAASC,IAAMC,MAAK,SAAAhB,GAAU,IAAD,EAEDiB,mBAAS,CACvCC,SAAU,CACRC,YAAa,QACbC,cAAe,CACXC,KAAM,OACNC,YAAa,YAEjBC,MAAO,GACPC,WAAY,CACRC,UAAU,GAEdC,OAAO,EACPC,SAAS,GAEXC,MAAO,CACHT,YAAa,QACbC,cAAe,CACXC,KAAM,QACNC,YAAa,UAEjBC,MAAO,GACPC,WAAY,CACRC,UAAU,EACVI,SAAS,GAEbH,OAAO,EACPC,SAAS,GAEbG,SAAU,CACNX,YAAa,QACbC,cAAe,CACXC,KAAM,WACNC,YAAa,YAEjBC,MAAO,GACPC,WAAY,CACRC,UAAU,EACVM,UAAW,GAEfL,OAAO,EACPC,SAAS,KA1CkB,mBAE1BK,EAF0B,KAEhBC,EAFgB,KA+CzBC,EAA+DlC,EAA/DkC,gBAAiBC,EAA8CnC,EAA9CmC,iBAAkBC,EAA4BpC,EAA5BoC,wBAE3CC,qBAAU,WACAH,GAAwC,MAArBC,GACvBC,MAEH,CAACF,EAAiBC,EAAkBC,IAEvC,IAkBME,EAAa,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,6DACpBD,EAAME,iBADc,SAEGzC,EAAM0C,OAAOV,EAASd,SAASK,MAAOS,EAASJ,MAAML,MAAOS,EAASF,SAASP,OAFjF,QAEdoB,EAFc,SAMZC,GAAiB,IAAIC,MAAOC,UAClCC,aAAaC,QAAQ,QAASL,EAASM,KACvCF,aAAaC,QAAQ,iBAAkBJ,GACvCG,aAAaC,QAAQ,SAAUL,EAASf,QALxCsB,QAAQC,IAAI,iBAJM,2CAAH,sDAYbC,EAAoB,GAC1B,IAAM,IAAIC,KAAOrB,EACboB,EAAkBE,KAAM,CACpBC,GAAIF,EACJG,OAAQxB,EAASqB,KAIzB,IAAII,EAAOL,EAAkBM,KAAK,SAAAC,GAAW,OACzC,kBAAC,IAAD,CACIN,IAAKM,EAAYJ,GACjBpC,YAAawC,EAAYH,OAAOrC,YAChCC,cAAeuC,EAAYH,OAAOpC,cAClCG,MAAOoC,EAAYH,OAAOjC,MAC1BqC,SAAUD,EAAYH,OAAO9B,MAC7BmC,eAAgBF,EAAYH,OAAOhC,WACnCG,QAASgC,EAAYH,OAAO7B,QAC5BmC,QAAS,SAAEvB,GAAF,OA/CW,SAAEA,EAAOwB,GACrC,IAAMC,EAAkBC,YAAcjC,EAAF,eAC/B+B,EAAcE,YAAcjC,EAAS+B,GAAc,CAChDxC,MAAOgB,EAAM2B,OAAO3C,MACpBG,MAAOyC,YAAe5B,EAAM2B,OAAO3C,MAAOS,EAAS+B,GAAavC,YAChEG,SAAS,MAGgB,UAA5BK,EAASd,SAASK,OACjB6C,OAAOC,MAAM,wBACbpC,EAAY,CACVf,SAAU,CACRK,MAAO,OAGPU,EAAY+B,GAgCQM,CAAqB/B,EAAOoB,EAAYJ,UAGjEvD,EAAMuE,UACPd,EAAO,kBAAC,IAAD,OAGX,IAAIe,EAAe,KAEdxE,EAAMyE,QACPD,EACI,2BAAIxE,EAAMyE,MAAMC,UAIxB,IAAIC,EAAe,KAKnB,OAJK3E,EAAM4E,kBACPD,EAAe,kBAAC,IAAD,CAAUE,GAAG,OAI9B,yBAAK3E,UAAU,aACZyE,EACAH,EACD,yBAAKM,MAAO,CAAEC,UAAW,OAAQC,WAAY,QAAU9E,UAAU,OAC/D,yBAAKA,UAAU,oBACb,kBAAC,IAAD,CAAM2E,GAAG,IAAI3E,UAAU,yBACrB,uBAAGA,UAAU,uBAAb,KADF,SAGA,yBAAKA,UAAU,UAAU4E,MAAO,CAAEG,YAAa,aAC7C,4BACE,yCAEF,uBAAG/E,UAAU,2BAAb,wBACoB,kBAAC,IAAD,CAAM2E,GAAG,eAAT,WAGlB,0BAAMK,OAAO,OAAOC,SAAU7C,GAC3BmB,EACD,kBAAC,IAAD,CAAQpC,KAAK,SAAShB,QAAQ,WAA9B,iBAyBD+E,uBAjBS,SAAAC,GACtB,MAAO,CACHd,QAASc,EAAMvE,OAAOyD,QACtBE,MAAOY,EAAMvE,OAAO2D,MACpBG,gBAAwC,OAAvBS,EAAMvE,OAAOwE,MAC9BpD,gBAAiBmD,EAAME,eAAeC,SACtCrD,iBAAkBkD,EAAMvE,OAAO2E,uBAIV,SAAAC,GACzB,MAAO,CACHhD,OAAQ,SAAExB,EAAUU,EAAOE,GAAnB,OAAiC4D,EAAUC,IAAgBzE,EAAUU,EAAOE,KACpFM,wBAAyB,kBAAMsD,EAAUC,IAA+B,UAI/DP,CAAgDtE,I,gCCjL/D,qCA0De8E,IAtDD,SAAE5F,GACZ,IAAI6F,EAAe,KACbC,EAAe,CAAC3F,IAAQ4F,cAM9B,OAJI/F,EAAM4D,SAAW5D,EAAM6D,gBAAkB7D,EAAM2B,SAC/CmE,EAAaxC,KAAKnD,IAAQ6F,SAGrBhG,EAAMmB,aACX,IAAO,QACH0E,EAAe,yCACX3F,UAAW4F,EAAaxF,KAAK,MACzBN,EAAMoB,cAFC,CAGXG,MAAOvB,EAAMuB,MACb0E,SAAUjG,EAAM8D,WACpB,MACJ,IAAO,WACH+B,EAAe,4CACX3F,UAAW4F,EAAaxF,KAAK,MACzBN,EAAMoB,cAFC,CAGXG,MAAOvB,EAAMuB,MACb0E,SAAUjG,EAAM8D,WACpB,MACJ,IAAO,SACH+B,EACI,4BACI3F,UAAW4F,EAAaxF,KAAK,KAC7BiB,MAAOvB,EAAMuB,MACb0E,SAAUjG,EAAM8D,SACf9D,EAAMoB,cAAc8E,QAAQxC,KAAI,SAAAyC,GAAM,OACnC,4BAAQ9C,IAAK8C,EAAO5E,MAAOA,MAAO4E,EAAO5E,OACpC4E,EAAOC,kBAKxB,MACJ,QACIP,EAAe,yCACX3F,UAAW4F,EAAaxF,KAAK,MACzBN,EAAMoB,cAFC,CAGXG,MAAOvB,EAAMuB,MACb0E,SAAUjG,EAAM8D,WAG5B,OACI,yBAAK5D,UAAWC,IAAQkG,OACpB,2BAAOnG,UAAWC,IAAQmG,OAAQtG,EAAMuG,OACvCV,K,mBCnDbnF,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,MAAQ,qBAAqB,aAAe,4BAA4B,QAAU","file":"static/js/5.e8163069.chunk.js","sourcesContent":["import React from 'react';\n\nimport classes from './Button.module.css';\n\nconst button = (props) => (\n    <button\n        disabled={props.disabled}\n        className={[classes.Button, classes[props.btnType]].join(' ')}\n        onClick={props.clicked}>{props.children}</button>\n);\n\nexport default button;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3gFiX\",\"Success\":\"Button_Success__2Rka1\",\"Danger\":\"Button_Danger__2ogZq\"};","import React from 'react';\n\nimport classes from './Spinner.module.css';\n\nconst spinner = () => (\n    <div className={classes.Loader}>Loading...</div>\n);\n\nexport default spinner;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__1twK-\",\"load2\":\"Spinner_load2__2gkgc\"};","import React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from 'react-redux';\n\nimport Input from '../../components/UI/Input/Input';\nimport Button from '../../components/UI/Button/Button';\nimport Spinner from '../../components/UI/Spinner/Spinner';\n// import api from '../../api/index';\nimport * as actions from '../../store/actions/index';\nimport { updateObject, checkValidity } from '../../shared/utility';\n\nconst signup = React.memo(props => {\n      \n  const [controls, setControls] = useState({\n    username: {\n      elementType: 'input',\n      elementConfig: {\n          type: 'text',\n          placeholder: 'Username'\n      },\n      value: '',\n      validation: {\n          required: true\n      },\n      valid: false,\n      touched: false\n    },\n    email: {\n        elementType: 'input',\n        elementConfig: {\n            type: 'email',\n            placeholder: 'E-mail'\n        },\n        value: '',\n        validation: {\n            required: true,\n            isEmail: true\n        },\n        valid: false,\n        touched: false\n    },\n    password: {\n        elementType: 'input',\n        elementConfig: {\n            type: 'password',\n            placeholder: 'Password'\n        },\n        value: '',\n        validation: {\n            required: true,\n            minLength: 6\n        },\n        valid: false,\n        touched: false\n    }\n  });\n\n  \n  const { buildingProduct, authRedirectPath ,onSetSignupRedirectPath } = props;\n\n  useEffect(() => {\n      if ( !buildingProduct && authRedirectPath !== '/' ) {\n        onSetSignupRedirectPath();\n      }\n  }, [buildingProduct, authRedirectPath ,onSetSignupRedirectPath]);\n\n  const inputChangedHandler = ( event, controlName ) => {\n  const updatedControls = updateObject( controls, {\n      [controlName]: updateObject( controls[controlName], {\n          value: event.target.value,\n          valid: checkValidity( event.target.value, controls[controlName].validation ),\n          touched: true\n      } )\n  } );\n    if(controls.username.value === 'admin') {\n        window.alert('Username not allowed');\n        setControls({\n          username: {\n            value: ''\n          }\n        });\n    } else {setControls(updatedControls);}\n  };\n\n  const submitHandler = async( event ) => {\n    event.preventDefault();\n    const response = await props.onAuth(controls.username.value, controls.email.value, controls.password.value);\n    if(!response) {\n      console.log('no fetch data');\n    } else {\n      const expirationDate = new Date().getTime();\n      localStorage.setItem('token', response._id);\n      localStorage.setItem('expirationDate', expirationDate);\n      localStorage.setItem('userId', response.email);}\n  };\n\n  const formElementsArray = [];\n  for ( let key in controls ) {\n      formElementsArray.push( {\n          id: key,\n          config: controls[key]\n      } );\n  };\n\n  let form = formElementsArray.map( formElement => (\n      <Input\n          key={formElement.id}\n          elementType={formElement.config.elementType}\n          elementConfig={formElement.config.elementConfig}\n          value={formElement.config.value}\n          invalid={!formElement.config.valid}\n          shouldValidate={formElement.config.validation}\n          touched={formElement.config.touched}\n          changed={( event ) => inputChangedHandler( event, formElement.id )} />\n  ));\n\n  if ( props.loading ) {\n      form = <Spinner />\n  }\n\n  let errorMessage = null;\n\n  if ( props.error ) {\n      errorMessage = (\n          <p>{props.error.message}</p>\n      );\n  }\n\n  let authRedirect = null;\n  if ( props.isAuthenticated ) {\n      authRedirect = <Redirect to='/' />\n  }\n\n  return (\n    <div className=\"container\">\n      {authRedirect}\n      {errorMessage}\n      <div style={{ marginTop: \"4rem\", paddingTop: \"70px\" }} className=\"row\">\n        <div className=\"col s8 offset-s2\">\n          <Link to=\"/\" className=\"btn-flat waves-effect\">\n            <i className=\"material-icons left\"> </i> Home\n          </Link>\n          <div className=\"col s12\" style={{ paddingLeft: \"11.250px\" }}>\n            <h4>\n              <b>Registrar</b>\n            </h4>\n            <p className=\"grey-text text-darken-1\">\n              JÃ¡ tem uma conta? <Link to=\"/user/login\">Login</Link>\n            </p>\n          </div>\n              <form action=\"POST\" onSubmit={submitHandler}>\n                {form}\n                <Button type='submit' btnType=\"Success\">ENVIAR</Button>\n              </form>\n        </div>\n      </div>\n    </div>  \n  );\n});\n\nconst mapStateToProps = state => {\n  return {\n      loading: state.signup.loading,\n      error: state.signup.error,\n      isAuthenticated: state.signup.token !== null,\n      buildingProduct: state.productBuilder.building,\n      authRedirectPath: state.signup.signupRedirectPath\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n      onAuth: ( username, email, password ) => dispatch( actions.signup( username, email, password ) ),\n      onSetSignupRedirectPath: () => dispatch( actions.setSignupRedirectPath( '/' ) )\n  };\n};\n\nexport default connect( mapStateToProps, mapDispatchToProps )( signup );","import React from 'react';\n\nimport classes from './Input.module.css';\n\nconst input = ( props ) => {\n    let inputElement = null;\n    const inputClasses = [classes.InputElement];\n\n    if (props.invalid && props.shouldValidate && props.touched) {\n        inputClasses.push(classes.Invalid);\n    }\n\n    switch ( props.elementType ) {\n        case ( 'input' ):\n            inputElement = <input\n                className={inputClasses.join(' ')}\n                {...props.elementConfig}\n                value={props.value}\n                onChange={props.changed} />;\n            break;\n        case ( 'textarea' ):\n            inputElement = <textarea\n                className={inputClasses.join(' ')}\n                {...props.elementConfig}\n                value={props.value}\n                onChange={props.changed} />;\n            break;\n        case ( 'select' ):\n            inputElement = (\n                <select\n                    className={inputClasses.join(' ')}\n                    value={props.value}\n                    onChange={props.changed}>\n                    {props.elementConfig.options.map(option => (\n                        <option key={option.value} value={option.value}>\n                            {option.displayValue}\n                        </option>\n                    ))}\n                </select>\n            );\n            break;\n        default:\n            inputElement = <input\n                className={inputClasses.join(' ')}\n                {...props.elementConfig}\n                value={props.value}\n                onChange={props.changed} />;\n    }\n\n    return (\n        <div className={classes.Input}>\n            <label className={classes.Label}>{props.label}</label>\n            {inputElement}\n        </div>\n    );\n\n};\n\nexport default input;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__3r5Ke\",\"Label\":\"Input_Label__1qyHr\",\"InputElement\":\"Input_InputElement__2m88K\",\"Invalid\":\"Input_Invalid__16Mis\"};"],"sourceRoot":""}